（一）自述
（1）
redux-saga是一个redux中间件，管理副作用

（二）初级教程
（1）
yield delay(1000)返回Promise
yield call(delay, 1000)返回plain Object

（2）
export function* needTest() {
  yield call(delay, 1000)
  yield put({ type: 'typeName' })
}

import test from 'tape';
test('needTest Saga test', (assert) => {
  const gen = needTest()

  assert.deepEqual(
    gen.next().value,
    call(delay, 1000),
    'description'
  )

  assert.deepEqual(
    gen.next().value,
    put({type: 'typeName'}),
    'description'
  )

  assert.deepEqual(
    gen.next(),
    { done: true, value: undefined },
    'description'
  )

  assert.end()
});

（三）Saga 概念的背景
（四）使用 Saga Helpers
（1）takeEvery 
yield takeEvery('typeName', otherReduxSagaFunction)
（2）takeLatest 
yield takeLatest('typeName', otherReduxSagaFunction)

（五）声明式 Effects
yield call(fn, ...arguments)
yield apply(fn, [...arguments])
yield call([obj, obj.method], ...arguments)
yield apply(obj, obj.method, [...arguments])
注：call和appl作用相同，改变this指向。
function add(c, d){ 
    return this.a + this.b + c + d; 
} 
var objectWithoutAdd = {a:1, b:2}; 
add.call(objectWithoutAdd, 3, 4); // 1 + 2 + 3 + 4 = 10
add.apply(objectWithoutAdd, [3, 4]); // 1 + 2 + 3 + 4 = 10

（六）dispatch action
put
（七）错误处理
（1.1）try catch
function* fetchFunction() {
  try {
    const fetchData = yield call(fetchApi, 'fetchUrl')
    yield put({ type: 'fetchSuccess', fetchData })
  }
  catch(error) {
    yield put({ type: 'fetchFailed', error })
  }
}
（1.2）测试
const iterator = fetchFunction()

assert.deepEqual(
  iterator.next().value,
  call(fetchApi, 'fetchUrl'),
  'description'
)

const error = {}
assert.deepEqual(
  iterator.throw(error).value,
  yield put({ type: 'fetchFailed', error }),
  'description'
)
（2）错误标识
function* fetchFunction() {
	const { fetchData, error } = yield call(fetchApi, 'fetchUrl')
	if (fetchData){
		yield put({ type: 'fetchSuccess', fetchData })
	}else{
		yield put({ type: 'fetchFailed', error })
	}
}

（八）一个常见的抽象概念: Effect
（九）监听未来的 action
const action = yield take('*')
const state = yield select()
（十）无阻塞调用
const action = yield take([...typeName])
const forkName = yield fork(otherReduxSagaFunction, ...arguments)
yield cancel(forkName)

try {
} catch(error) {
} finally {
    if(yield cancelled()){
    }
}

（十一）同时执行多个任务
const [name1, name2] = yield [
  call(otherReduxSagaFunction1, ...arguments1),
  call(otherReduxSagaFunction2, ...arguments2))
]
generator会被阻塞直到所有的effect都执行完毕，或一个effect被拒绝

（十二）在多个 Effects 之间启动 race
const [name1, name2] = yield race([
  name1:call(otherReduxSagaFunction1, ...arguments1),
  name2:call(otherReduxSagaFunction2, ...arguments2))
])

（十三）使用 yield* 对 Sagas 进行排序
yield* otherReduxSagaFunction1()

（十四）组合 Sagas
（十五）取消任务（从这里开始，这节目前完全没整理）

























































































